# MQTT Topics Database Schema

# $SYS Metrics Table - stores broker statistics for MQTT $SYS topics
# Exported as MQTT topics so clients can subscribe to $SYS/broker/*
type mqtt_sys_metrics @table @export(name: "$SYS") {
  id: String @primaryKey
  topic: String @indexed
  value: String
  timestamp: String
}

# MQTT Topics Registry Table - central table for all MQTT topics
# Exported as root "/" to catch all non-$SYS MQTT topics
# Acts as catch-all resource for dynamic topic handling
type mqtt_topics @table @export(name: "/", contentType: "mqtt") {
  id: String @primaryKey
  topic: String @indexed
  payload: String
  qos: Int
  retain: Boolean
  timestamp: String
  client_id: String
}

# Note: Additional topic tables (mqtt_home, mqtt_sensors, etc.) can be created dynamically
# by the plugin when needed for topic-specific storage.
